:root {
  --bg-color: #f2f2f2;
  --ink-color: #000a;

  --grey-dark-color: #4d5254;
  --grey-less-dark-color: #777;
  --grey-mid-color: #e7e7e7;
  --grey-light-color: #e7e7e7;
  --grey-bright-color: #fafafa;
  --white-color: #ffffff;
  --blue-color: #b0c4ec;

  --meta-black: transparent;
  --meta-grey: transparent;
  --meta-green: transparent;
  --meta-yellow: transparent;

  --meta-toggle: var(--ink-color);
  --handle-fill: var(--ink-color);
  --handle-stroke: transparent;

  --transition-fill: fill 1.4s cubic-bezier(0, 1.5, 0, 1);
  --transition-stroke: stroke 1.4s cubic-bezier(0, 1.5, 0, 1);
}

:root[meta-mode] {
  --bg-color: #e2e2e2;
  --ink-color: #0001;

  --meta-black: black;
  --meta-grey: color(display-p3 0.3 0.3 0.3);
  --meta-green: color(display-p3 0 1 0.8);
  --meta-yellow: color(display-p3 1 0.7 0);

  --meta-toggle: var(--meta-grey);
  --handle-fill: var(--meta-black);
  --handle-stroke: var(--meta-black);
}

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  overflow-wrap: break-word;
  hyphens: auto;
  touch-action: none;
  -webkit-user-drag: none;
  -webkit-user-select: none;
  user-select: none;
}

html,
body {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  font-family: system-ui;
  stroke-linecap: round;
  background-color: var(--bg-color);
  transition: background-color 0.6s cubic-bezier(0.3, 1.4, 0.3, 1);
}

svg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
}

svg * {
  transition: var(--transition-fill), var(--transition-stroke);
}

#meta-toggle {
  animation: zoom-in 0.7s cubic-bezier(0, 1.2, 0, 1) backwards;

  transition:
    scale 0.8s cubic-bezier(1, 0, 0, 1.3),
    translate 0.5s cubic-bezier(0.4, 1.3, 0.1, 0.98);

  &.dragging {
    scale: 1.8;
    transition:
      scale 2s cubic-bezier(0, 1.2, 0, 1),
      translate 0.05s linear;
  }

  & circle {
    fill: var(--meta-toggle);
    transition:
      scale 0.8s cubic-bezier(0, 1.5, 0, 1),
      var(--transition-fill);
  }

  .inner {
    fill: var(--bg-color);
    scale: 0.75;
  }

  .secret {
    scale: 0.15;
  }

  &.active {
    .inner {
      scale: 0.85;
    }

    .secret {
      scale: 0.7;
    }
  }
}

.pseudo-touch {
  fill: none;
  stroke: #00000011;
  stroke-width: 20;
}

.stroke {
  fill: none;
  stroke: var(--ink-color);
  stroke-width: 2;
}

.handle {
  fill: var(--handle-fill);
  stroke: var(--handle-stroke);
  stroke-width: 3;
}

.gizmo {
  fill: none;
  stroke: var(--meta-black);
  stroke-width: 2;

  & polyline {
    stroke-width: 2;
  }
}

@keyframes zoom-in {
  from {
    scale: 0;
  }
}
