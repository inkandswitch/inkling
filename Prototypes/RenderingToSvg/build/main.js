function rt(t,n,r,a=c=>c){return t*a(.5-n*(.5-r))}function vt(t){return[-t[0],-t[1]]}function d(t,n){return[t[0]+n[0],t[1]+n[1]]}function g(t,n){return[t[0]-n[0],t[1]-n[1]]}function m(t,n){return[t[0]*n,t[1]*n]}function kt(t,n){return[t[0]/n,t[1]/n]}function I(t){return[t[1],-t[0]]}function it(t,n){return t[0]*n[0]+t[1]*n[1]}function Mt(t,n){return t[0]===n[0]&&t[1]===n[1]}function St(t){return Math.hypot(t[0],t[1])}function wt(t){return t[0]*t[0]+t[1]*t[1]}function ot(t,n){return wt(g(t,n))}function ut(t){return kt(t,St(t))}function xt(t,n){return Math.hypot(t[1]-n[1],t[0]-n[0])}function N(t,n,r){let a=Math.sin(r),c=Math.cos(r),M=t[0]-n[0],v=t[1]-n[1],i=M*c-v*a,h=M*a+v*c;return[i+n[0],h+n[1]]}function V(t,n,r){return d(t,m(g(n,t),r))}function st(t,n,r){return d(t,m(n,r))}var{min:E,PI:yt}=Math,lt=.275,_=yt+1e-4;function bt(t,n={}){let{size:r=16,smoothing:a=.5,thinning:c=.5,simulatePressure:M=!0,easing:v=e=>e,start:i={},end:h={},last:D=!1}=n,{cap:j=!0,easing:S=e=>e*(2-e)}=i,{cap:O=!0,easing:p=e=>--e*e*e+1}=h;if(t.length===0||r<=0)return[];let l=t[t.length-1].runningLength,k=i.taper===!1?0:i.taper===!0?Math.max(r,l):i.taper,L=h.taper===!1?0:h.taper===!0?Math.max(r,l):h.taper,$=Math.pow(r*a,2),q=[],C=[],W=t.slice(0,10).reduce((e,s)=>{let o=s.pressure;if(M){let u=E(1,s.distance/r),R=E(1,1-u);o=E(1,e+(R-e)*(u*lt))}return(e+o)/2},t[0].pressure),f=rt(r,c,t[t.length-1].pressure,v),G,H=t[0].vector,z=t[0].point,Q=z,b=z,A=Q,J=!1;for(let e=0;e<t.length;e++){let{pressure:s}=t[e],{point:o,vector:u,distance:R,runningLength:F}=t[e];if(e<t.length-1&&l-F<3)continue;if(c){if(M){let y=E(1,R/r),U=E(1,1-y);s=E(1,W+(U-W)*(y*lt))}f=rt(r,c,s,v)}else f=r/2;G===void 0&&(G=f);let gt=F<k?S(F/k):1,dt=l-F<L?p((l-F)/L):1;f=Math.max(.01,f*Math.min(gt,dt));let tt=(e<t.length-1?t[e+1]:t[e]).vector,T=e<t.length-1?it(u,tt):1,mt=it(u,H)<0&&!J,nt=T!==null&&T<0;if(mt||nt){let y=m(I(H),f);for(let U=1/13,B=0;B<=1;B+=U)b=N(g(o,y),o,_*B),q.push(b),A=N(d(o,y),o,_*-B),C.push(A);z=b,Q=A,nt&&(J=!0);continue}if(J=!1,e===t.length-1){let y=m(I(u),f);q.push(g(o,y)),C.push(d(o,y));continue}let et=m(I(V(tt,u,T)),f);b=g(o,et),(e<=1||ot(z,b)>$)&&(q.push(b),z=b),A=d(o,et),(e<=1||ot(Q,A)>$)&&(C.push(A),Q=A),W=s,H=u}let w=t[0].point.slice(0,2),x=t.length>1?t[t.length-1].point.slice(0,2):d(t[0].point,[1,1]),K=[],Z=[];if(t.length===1){if(!(k||L)||D){let e=st(w,ut(I(g(w,x))),-(G||f)),s=[];for(let o=1/13,u=o;u<=1;u+=o)s.push(N(e,w,_*2*u));return s}}else{if(!(k||L&&t.length===1))if(j)for(let s=1/13,o=s;o<=1;o+=s){let u=N(C[0],w,_*o);K.push(u)}else{let s=g(q[0],C[0]),o=m(s,.5),u=m(s,.51);K.push(g(w,o),g(w,u),d(w,u),d(w,o))}let e=I(vt(t[t.length-1].vector));if(L||k&&t.length===1)Z.push(x);else if(O){let s=st(x,e,f);for(let o=1/29,u=o;u<1;u+=o)Z.push(N(s,x,_*3*u))}else Z.push(d(x,m(e,f)),d(x,m(e,f*.99)),g(x,m(e,f*.99)),g(x,m(e,f)))}return q.concat(Z,C.reverse(),K)}function At(t,n={}){var r;let{streamline:a=.5,size:c=16,last:M=!1}=n;if(t.length===0)return[];let v=.15+(1-a)*.85,i=Array.isArray(t[0])?t:t.map(({x:p,y:l,pressure:k=.5})=>[p,l,k]);if(i.length===2){let p=i[1];i=i.slice(0,-1);for(let l=1;l<5;l++)i.push(V(i[0],p,l/4))}i.length===1&&(i=[...i,[...d(i[0],[1,1]),...i[0].slice(2)]]);let h=[{point:[i[0][0],i[0][1]],pressure:i[0][2]>=0?i[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],D=!1,j=0,S=h[0],O=i.length-1;for(let p=1;p<i.length;p++){let l=M&&p===O?i[p].slice(0,2):V(S.point,i[p],v);if(Mt(S.point,l))continue;let k=xt(l,S.point);if(j+=k,p<O&&!D){if(j<c)continue;D=!0}S={point:l,pressure:i[p][2]>=0?i[p][2]:.5,vector:ut(g(S.point,l)),distance:k,runningLength:j},h.push(S)}return h[0].vector=((r=h[1])==null?void 0:r.vector)||[0,0],h}function ct(t,n={}){return bt(At(t,n),n)}var X=[];window.nativeEvent=(t,n)=>{X.push({eventState:t,touches:n})};var P=null;function at(t){for(let n of X)Ct(n);X.length=0,P!=null&&ht(),requestAnimationFrame(at)}requestAnimationFrame(at);function pt(t){return[t.x,t.y,t.force]}function Ct(t){for(let[n,r]of Object.entries(t.touches)){let a=function(c){P.push(pt(c))};if(r[0].type==="pencil")switch(t.eventState){case"began":{P=[pt(r[0])],ft();break}case"moved":{r.forEach(a);break}case"ended":{a(r[0]),ht(),console.log(P.length),P=null;break}}}}var Y=document.getElementById("svg"),Et={size:1.5,thinning:.5,smoothing:.5,streamline:.5,easing:t=>t,start:{taper:0,easing:t=>t,cap:!0},end:{taper:0,easing:t=>t,cap:!0},simulatePressure:!1};function ft(){let t=ct(P,Et),n=Pt(t),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"d",n),Y.appendChild(r)}function ht(){Y.removeChild(Y.lastChild),ft()}function Pt(t){let n=t.reduce((r,[a,c],M,v)=>{let[i,h]=v[(M+1)%v.length];return r.push(a,c,(a+i)/2,(c+h)/2),r},["M",...t[0],"Q"]);return n.push("Z"),n.join(" ")}
//# sourceMappingURL=main.js.map
