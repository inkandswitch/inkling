function rt(t,n,r,g=p=>p){return t*g(.5-n*(.5-r))}function vt(t){return[-t[0],-t[1]]}function d(t,n){return[t[0]+n[0],t[1]+n[1]]}function f(t,n){return[t[0]-n[0],t[1]-n[1]]}function m(t,n){return[t[0]*n,t[1]*n]}function kt(t,n){return[t[0]/n,t[1]/n]}function F(t){return[t[1],-t[0]]}function it(t,n){return t[0]*n[0]+t[1]*n[1]}function St(t,n){return t[0]===n[0]&&t[1]===n[1]}function wt(t){return Math.hypot(t[0],t[1])}function Mt(t){return t[0]*t[0]+t[1]*t[1]}function ot(t,n){return Mt(f(t,n))}function ut(t){return kt(t,wt(t))}function xt(t,n){return Math.hypot(t[1]-n[1],t[0]-n[0])}function N(t,n,r){let g=Math.sin(r),p=Math.cos(r),S=t[0]-n[0],v=t[1]-n[1],i=S*p-v*g,l=S*g+v*p;return[i+n[0],l+n[1]]}function U(t,n,r){return d(t,m(f(n,t),r))}function st(t,n,r){return d(t,m(n,r))}var{min:A,PI:yt}=Math,ct=.275,_=yt+1e-4;function bt(t,n={}){let{size:r=16,smoothing:g=.5,thinning:p=.5,simulatePressure:S=!0,easing:v=e=>e,start:i={},end:l={},last:D=!1}=n,{cap:j=!0,easing:w=e=>e*(2-e)}=i,{cap:I=!0,easing:a=e=>--e*e*e+1}=l;if(t.length===0||r<=0)return[];let c=t[t.length-1].runningLength,k=i.taper===!1?0:i.taper===!0?Math.max(r,c):i.taper,C=l.taper===!1?0:l.taper===!0?Math.max(r,c):l.taper,$=Math.pow(r*g,2),L=[],P=[],B=t.slice(0,10).reduce((e,s)=>{let o=s.pressure;if(S){let u=A(1,s.distance/r),K=A(1,1-u);o=A(1,e+(K-e)*(u*ct))}return(e+o)/2},t[0].pressure),h=rt(r,p,t[t.length-1].pressure,v),W,G=t[0].vector,q=t[0].point,O=q,b=q,E=O,H=!1;for(let e=0;e<t.length;e++){let{pressure:s}=t[e],{point:o,vector:u,distance:K,runningLength:z}=t[e];if(e<t.length-1&&c-z<3)continue;if(p){if(S){let y=A(1,K/r),T=A(1,1-y);s=A(1,B+(T-B)*(y*ct))}h=rt(r,p,s,v)}else h=r/2;W===void 0&&(W=h);let gt=z<k?w(z/k):1,dt=c-z<C?a((c-z)/C):1;h=Math.max(.01,h*Math.min(gt,dt));let tt=(e<t.length-1?t[e+1]:t[e]).vector,R=e<t.length-1?it(u,tt):1,mt=it(u,G)<0&&!H,nt=R!==null&&R<0;if(mt||nt){let y=m(F(G),h);for(let T=1/13,Z=0;Z<=1;Z+=T)b=N(f(o,y),o,_*Z),L.push(b),E=N(d(o,y),o,_*-Z),P.push(E);q=b,O=E,nt&&(H=!0);continue}if(H=!1,e===t.length-1){let y=m(F(u),h);L.push(f(o,y)),P.push(d(o,y));continue}let et=m(F(U(tt,u,R)),h);b=f(o,et),(e<=1||ot(q,b)>$)&&(L.push(b),q=b),E=d(o,et),(e<=1||ot(O,E)>$)&&(P.push(E),O=E),B=s,G=u}let M=t[0].point.slice(0,2),x=t.length>1?t[t.length-1].point.slice(0,2):d(t[0].point,[1,1]),J=[],Q=[];if(t.length===1){if(!(k||C)||D){let e=st(M,ut(F(f(M,x))),-(W||h)),s=[];for(let o=1/13,u=o;u<=1;u+=o)s.push(N(e,M,_*2*u));return s}}else{if(!(k||C&&t.length===1))if(j)for(let s=1/13,o=s;o<=1;o+=s){let u=N(P[0],M,_*o);J.push(u)}else{let s=f(L[0],P[0]),o=m(s,.5),u=m(s,.51);J.push(f(M,o),f(M,u),d(M,u),d(M,o))}let e=F(vt(t[t.length-1].vector));if(C||k&&t.length===1)Q.push(x);else if(I){let s=st(x,e,h);for(let o=1/29,u=o;u<1;u+=o)Q.push(N(s,x,_*3*u))}else Q.push(d(x,m(e,h)),d(x,m(e,h*.99)),f(x,m(e,h*.99)),f(x,m(e,h)))}return L.concat(Q,P.reverse(),J)}function Et(t,n={}){var r;let{streamline:g=.5,size:p=16,last:S=!1}=n;if(t.length===0)return[];let v=.15+(1-g)*.85,i=Array.isArray(t[0])?t:t.map(({x:a,y:c,pressure:k=.5})=>[a,c,k]);if(i.length===2){let a=i[1];i=i.slice(0,-1);for(let c=1;c<5;c++)i.push(U(i[0],a,c/4))}i.length===1&&(i=[...i,[...d(i[0],[1,1]),...i[0].slice(2)]]);let l=[{point:[i[0][0],i[0][1]],pressure:i[0][2]>=0?i[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],D=!1,j=0,w=l[0],I=i.length-1;for(let a=1;a<i.length;a++){let c=S&&a===I?i[a].slice(0,2):U(w.point,i[a],v);if(St(w.point,c))continue;let k=xt(c,w.point);if(j+=k,a<I&&!D){if(j<p)continue;D=!0}w={point:c,pressure:i[a][2]>=0?i[a][2]:.5,vector:ut(f(w.point,c)),distance:k,runningLength:j},l.push(w)}return l[0].vector=((r=l[1])==null?void 0:r.vector)||[0,0],l}function lt(t,n={}){return bt(Et(t,n),n)}var V=[];window.nativeEvent=(t,n)=>{V.push({eventState:t,touches:n})};function at(t){V.forEach(Pt),V.length=0,requestAnimationFrame(at)}requestAnimationFrame(at);var X=null;function ht(t){return[t.x,t.y,t.force]}function At(t){X=[ht(t)],pt()}function ft(t){X.push(ht(t)),jt()}function Pt(t){for(let[n,r]of Object.entries(t.touches))if(r[0].type==="pencil")switch(t.eventState){case"began":{At(r[0]);break}case"moved":{r.forEach(ft);break}case"ended":{ft(r[0]);break}}}var Y=document.getElementById("svg"),Ct={size:1,thinning:.5,smoothing:.5,streamline:.5,easing:t=>t,start:{taper:0,easing:t=>t,cap:!0},end:{taper:0,easing:t=>t,cap:!0},simulatePressure:!1};function pt(){let t=lt(X,Ct),n=Lt(t),r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttributeNS(null,"d",n),Y.appendChild(r)}function jt(){Y.removeChild(Y.lastChild),pt()}function Lt(t){let n=t.reduce((r,[g,p],S,v)=>{let[i,l]=v[(S+1)%v.length];return r.push(g,p,(g+i)/2,(p+l)/2),r},["M",...t[0],"Q"]);return n.push("Z"),n.join(" ")}
//# sourceMappingURL=main.js.map
