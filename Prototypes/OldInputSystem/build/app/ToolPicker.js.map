{
  "version": 3,
  "sources": ["/Users/admin/Work/Inkling/Prototypes/OldInputSystem/src/app/ToolPicker.ts"],
  "sourcesContent": ["import Vec from '../lib/vec';\nimport Events from './NativeEvents';\nimport Tool from './tools/Tool';\n\nexport default class ToolPicker {\n  selected?: Tool;\n\n  constructor(private tools: Tool[]) {\n    this.select(tools[0]);\n  }\n\n  update(events: Events) {\n    const fingerDown = events.find('finger', 'began');\n    if (!fingerDown) {\n      return;\n    }\n\n    const newSelected = this.tools.find(tool => {\n      const center = Vec(tool.buttonX, tool.buttonY);\n      return Vec.dist(center, fingerDown.position) < 20;\n    });\n\n    if (!newSelected) {\n      // the user's finger is not on one of the tool buttons,\n      // so do nothing\n    } else {\n      this.select(newSelected);\n    }\n  }\n\n  select(t: Tool) {\n    if (t === this.selected) {\n      t.onAction();\n      return;\n    }\n\n    this.selected = t;\n    for (const tool of this.tools) {\n      if (tool === this.selected) {\n        tool.onSelected();\n      } else {\n        tool.onDeselected();\n      }\n    }\n  }\n}\n"],
  "mappings": "AAAA;AAIA,gCAAgC;AAAA,EAG9B,YAAoB,OAAe;AAAf;AAClB,SAAK,OAAO,MAAM;AAAA;AAAA,EAGpB,OAAO,QAAgB;AACrB,UAAM,aAAa,OAAO,KAAK,UAAU;AACzC,QAAI,CAAC,YAAY;AACf;AAAA;AAGF,UAAM,cAAc,KAAK,MAAM,KAAK,UAAQ;AAC1C,YAAM,SAAS,IAAI,KAAK,SAAS,KAAK;AACtC,aAAO,IAAI,KAAK,QAAQ,WAAW,YAAY;AAAA;AAGjD,QAAI,CAAC,aAAa;AAAA,WAGX;AACL,WAAK,OAAO;AAAA;AAAA;AAAA,EAIhB,OAAO,GAAS;AACd,QAAI,MAAM,KAAK,UAAU;AACvB,QAAE;AACF;AAAA;AAGF,SAAK,WAAW;AAChB,eAAW,QAAQ,KAAK,OAAO;AAC7B,UAAI,SAAS,KAAK,UAAU;AAC1B,aAAK;AAAA,aACA;AACL,aAAK;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
